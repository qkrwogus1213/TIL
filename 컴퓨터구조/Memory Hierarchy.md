# 지역성의 원칙

1. 시간적 지역성(temporal locality) 
   - 최근에 참조된 항목은 곧 다시 참조될 확률이 높다. 
   - 메모리 접근이 시간적으로 집중되는 현상 
2. 공간적 지역성(spatial locality)
   - 어떤 항목이 참조되면 그 근처에 있는 다른 항목들이 곧바로 참조될 가능성 이 높다. 
   - 메모리 접근이 공간적으로 집중되는 현상 

1)메모리 계층구조의 성능

- 적중 시간 (hit time) 
  - 메모리 계층구조의 상위 계층을 접근하는데 걸리는 시간 
  - 접근이 적중인지 실패인지 결정하는데 필요한 시간 포함 
- 실패 손실 (miss penalty) 
  - 하위 계층에서 상위 계층으로 블록을 인출하는데 걸리는 시간 
  - 하위 블록 접근 시간
- 평균 메모리 접근 시간: 적중시간 + 실패율 X 실패 손실

## SRAM

- 읽기 접근 시간과 쓰기 접근 시간이 다를 수는 있지만, 데이터 위치에 상관 없이 같은 접근 시간은 같다. 
- 비트 당 6 ~ 8개의 트랜지스터

## DRAM

- 데이터가 전하 형태로 커패시터에 저장
-  행 버퍼 (row buffer) 
  - 전체 행을 읽어서 버퍼에 보관하고 반복적으로 접근 
  - 같은 행 내의 비트 접근 시간 단축

## 디스크 메모리

-  하드디스크는 원판(platter)의 집합으로 구성 
- 트랙
- 섹터
- 디스크 접근시간: 탐색시간(+회전 지연 시간, +전송 시간)

# 캐쉬

1.캐시 메모리의 정의 

-  메모리 계층구조에서 프로세서와 주기억장치 사이에 있는 것
-  프로세서와 주기억장치 사이에 있는 작고 빠른 메모리 

## 직접 사상 캐시

1.각 메모리 위치는 캐쉬 내의 딱 한 장소에 사상

- 캐시 주소 (캐시 인덱스) = (블록 주소) modulo (전체 캐쉬 블록 수)

2.캐시 블록의 구성

- 유호 비트
- 데이터
- 태그

## 블록 크기와 성능

1. 블록을 크게하는 경우
   - 공간적 지역성 증가 
   - 실패율 감소
   -  실패 손실 증가 
2. 블록이 너무 클 경우
   - 캐시 내의 블록이 너무 적다.
   - 블록 내 워드 간의 공간 적 지역성 감소 
   - 실패율 증가

## Intrinsity FastMATH 프로세서

1.Intrinsity FastMATH 

- 임베디드 마이크로프로세서 
- 단순한 캐시를 갖는 MIPS 구조
- 12-단계 명령어 파이프라인

2. Intrinsity FastMATH 캐시
   - 분리된 명령어 캐시와 데이터 캐시 
     - 각각 16KiB: 16-워드 블록 256 개 
   - 쓰기 정책 
     - 즉시 쓰기와 나중 쓰기 두 가지 방식을 다 지원하고 운영체제가 선택 

## 캐시 성능 

 캐시 성능 향상을 위한 두 가지 방법

  1. 연관 사상 (associative mapping)
  2. 다단계 캐싱 (multilevel caching) 

메모리를 고려한 CPU 시간

- CPU 시간 = (CPU의 프로그램 수행 클럭 사이클 수 + 메모리 지연 클럭 사이클 수) x 클럭 사이클 시간
- 캐시 적중 시간은 정상적인 CPU 수행 사이클의 일부
- 메모리 지연 클럭 사이클의 주원인은 캐시 실패

## 메모리 지연 클럭 사이클

- 읽기 실패 손실 = 쓰기 실패 손실
- 읽기 실패율 = 쓰기 실패율
- 무시할 수 있을 정도의 쓰기 버퍼 지연

## 캐시 실패 줄이기

1. 직접 사상 (direct mapping) 
   - 메모리 블록이 캐시 블록 단 한 곳에만 들어갈 수 있다
2. 집합 연관 사상 (set-associative mapping) 
3. 완전 연관 사상 (fully associative mapping) 
   -  직접 사상 캐시와 정반대 
   - 메모리 블록이 캐시 블록 아무데나 들어갈 수 있다. 
   - 주어진 블록을 찾기 위해서는 캐시 내의 모든 태그 비교 필요
   - CAM (content addressable memory) = 연상 메모리 (associative memory) 